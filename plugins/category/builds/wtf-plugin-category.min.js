!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).wtfCategory=n()}(this,(function(){"use strict";var t=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return new Promise((function(r,o){if(t&&n)if(0!==t.length)for(var i=[],c=e-1,a=0,u=function e(u){a+=1;var f=n(t[u]);f.then?(f.then((function(t){i[u]=t})),f.catch((function(t){console.error(t),i[u]=null})),f.finally((function(){a-=1,c+=1,t.length>=c+1?e(c):a<=0&&r(i)}))):o("Error: function must return a promise")},f=t.length<e?t.length:e,l=0;l<f;l+=1)u(l);else r([]);else o("Error: missing required parameters to rate-limit function")}))},n={one:function(n,e){return t(n,e,1)},two:function(n,e){return t(n,e,2)},three:function(n,e){return t(n,e,3)},four:function(n,e){return t(n,e,4)},five:function(n,e){return t(n,e,5)},ten:function(n,e){return t(n,e,10)},fifteen:function(n,e){return t(n,e,15)}};n.serial=n.one,n.linear=n.one,n.crawl=n.three,n.walk=n.five,n.run=n.ten,n.sprint=n.fifteen;var e=n,r={lang:"en",wiki:"wikipedia",domain:null,path:"w/api.php"},o=function(t,n,e){var o;n=n||{},n=Object.assign({},r,n),"string"==typeof t?n.lang=t:(o=t)&&"[object Object]"===Object.prototype.toString.call(o)&&(n=Object.assign(n,t));var i="https://".concat(n.lang,".wikipedia.org/").concat(n.path,"?");return n.domain&&(i="https://".concat(n.domain,"/").concat(n.path,"?")),e(i+="format=json&action=query&generator=random&grnnamespace=14&prop=revisions&grnlimit=1&origin=*").then((function(t){try{var n=t.query.pages;return n[Object.keys(n)[0]].title}catch(t){throw t}})).catch((function(t){return console.error(t),null}))};var i,c=(i=Object.freeze({__proto__:null,default:e}))&&i.default||i;return function(t){t.wtf.parseCategory=function(n,e,r){return function(t,n,e,r){return n?t.category(n,e).then((function(n){var e=function(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=[];for(n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r}(n.pages.map((function(t){return t.title})));return c.three(e,(function(n){return t.fetch(n,r)})).then((function(t){return{docs:[].concat.apply([],t),categories:n.categories}}))})):{docs:[],categories:[]}}(t.wtf,n,e,r)},t.wtf.randomCategory=function(n,e){return o(n,e,t.http)},t.wtf.fetchCategory=t.wtf.parseCategory}}));
