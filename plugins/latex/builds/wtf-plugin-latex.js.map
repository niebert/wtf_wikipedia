{"version":3,"file":"wtf-plugin-latex.js","sources":["../src/01-doc.js","../src/02-section.js","../src/03-paragraph.js","../src/_lib/smartReplace.js","../src/04-sentence.js","../src/05-link.js","../src/image.js","../src/infobox.js","../src/list.js","../src/reference.js","../src/table.js","../src/index.js"],"sourcesContent":["const defaults = {\n  infoboxes: true,\n  sections: true\n}\n\n// we should try to make this look like the wikipedia does, i guess.\nconst softRedirect = function(doc) {\n  let link = doc.redirectTo()\n  let href = link.page\n  href = './' + href.replace(/ /g, '_')\n  //add anchor\n  if (link.anchor) {\n    href += '#' + link.anchor\n  }\n  return '↳ \\\\href{' + href + '}{' + link.text + '}'\n}\n\n//\nconst toLatex = function(options) {\n  options = Object.assign({}, defaults, options)\n  let out = ''\n  //if it's a redirect page, give it a 'soft landing':\n  if (this.isRedirect() === true) {\n    return softRedirect(this) //end it here.\n  }\n  //render infoboxes (up at the top)\n  if (options.infoboxes === true) {\n    out += this.infoboxes()\n      .map(i => i.latex(options))\n      .join('\\n')\n  }\n  //render each section\n  if (options.sections === true || options.paragraphs === true || options.sentences === true) {\n    out += this.sections()\n      .map(s => s.latex(options))\n      .join('\\n')\n  }\n  //default off\n  //render citations\n  if (options.references === true) {\n    out += this.references()\n      .map(c => c.latex(options))\n      .join('\\n')\n  }\n  return out\n}\nmodule.exports = toLatex\n","const defaults = {\n  headers: true,\n  images: true,\n  tables: true,\n  lists: true,\n  paragraphs: true\n}\n//map '==' depth to 'subsection', 'subsubsection', etc\nconst doSection = function(options) {\n  options = Object.assign({}, defaults, options)\n  let out = ''\n  let num = 1\n  //make the header\n  if (options.headers === true && this.title()) {\n    num = 1 + this.depth\n    let vOpen = '\\n'\n    let vClose = '}'\n    switch (num) {\n      case 1:\n        vOpen += '\\\\chapter{'\n        break\n      case 2:\n        vOpen += '\\\\section{'\n        break\n      case 3:\n        vOpen += '\\\\subsection{'\n        break\n      case 4:\n        vOpen += '\\\\subsubsection{'\n        break\n      case 5:\n        vOpen += '\\\\paragraph{'\n        vClose = '} \\\\\\\\ \\n'\n        break\n      case 6:\n        vOpen += '\\\\subparagraph{'\n        vClose = '} \\\\\\\\ \\n'\n        break\n      default:\n        vOpen +=\n          '\\n% section with depth=' + num + ' undefined - use subparagraph instead\\n\\\\subparagraph{'\n        vClose = '} \\\\\\\\ \\n'\n    }\n    out += vOpen + this.title() + vClose\n    out += '\\n'\n  }\n  //put any images under the header\n  if (options.images === true && this.images()) {\n    out += this.images()\n      .map(img => img.latex(options))\n      .join('\\n')\n    //out += '\\n';\n  }\n  //make a out tablew\n  if (options.tables === true && this.tables()) {\n    out += this.tables()\n      .map(t => t.latex(options))\n      .join('\\n')\n  }\n  // //make a out bullet-list\n  if (options.lists === true && this.lists()) {\n    out += this.lists()\n      .map(list => list.latex(options))\n      .join('\\n')\n  }\n  //finally, write the sentence text.\n  if (options.paragraphs === true || options.sentences === true) {\n    out += this.paragraphs()\n      .map(s => s.latex(options))\n      .join(' ')\n    out += '\\n'\n  }\n  // let title_tag = ' SECTION depth=' + num + ' - TITLE: ' + section.title + '\\n';\n  // wrap a section comment\n  //out = '\\n% BEGIN' + title_tag + out + '\\n% END' + title_tag;\n  return out\n}\nmodule.exports = doSection\n","const defaults = {\n  sentences: true\n}\n\nconst toLatex = function(options) {\n  options = Object.assign({}, defaults, options)\n  let out = ''\n  if (options.sentences === true) {\n    out += '\\n\\n% BEGIN Paragraph\\n'\n    out += this.sentences().reduce((str, s) => {\n      str += s.latex(options) + '\\n'\n      return str\n    }, '')\n    out += '% END Paragraph'\n  }\n  return out\n}\nmodule.exports = toLatex\n","//escape a string like 'fun*2.Co' for a regExpr\nfunction escapeRegExp(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&')\n}\n\n//sometimes text-replacements can be ambiguous - words used multiple times..\nconst smartReplace = function(all, text, result) {\n  if (!text || !all) {\n    return all\n  }\n\n  if (typeof all === 'number') {\n    all = String(all)\n  }\n  text = escapeRegExp(text)\n  //try a word-boundary replace\n  let reg = new RegExp('\\\\b' + text + '\\\\b')\n  if (reg.test(all) === true) {\n    all = all.replace(reg, result)\n  } else {\n    //otherwise, fall-back to a much messier, dangerous replacement\n    // console.warn('missing \\'' + text + '\\'');\n    all = all.replace(text, result)\n  }\n  return all\n}\n\nmodule.exports = smartReplace\n","const smartReplace = require('./_lib/smartReplace')\n\nconst defaults = {\n  links: true,\n  formatting: true\n}\n// create links, bold, italic in latex\nconst toLatex = function(options) {\n  options = Object.assign({}, defaults, options)\n  let text = this.text()\n  //turn links back into links\n  if (options.links === true && this.links().length > 0) {\n    this.links().forEach(link => {\n      let tag = link.latex()\n      let str = link.text() || link.page()\n      text = smartReplace(text, str, tag)\n    })\n  }\n  if (options.formatting === true) {\n    if (this.data.fmt) {\n      if (this.data.fmt.bold) {\n        this.data.fmt.bold.forEach(str => {\n          let tag = '\\\\textbf{' + str + '}'\n          text = smartReplace(text, str, tag)\n        })\n      }\n      if (this.data.fmt.italic) {\n        this.data.fmt.italic.forEach(str => {\n          let tag = '\\\\textit{' + str + '}'\n          text = smartReplace(text, str, tag)\n        })\n      }\n    }\n  }\n  return text\n}\nmodule.exports = toLatex\n","const toLatex = function() {\n  let href = this.href()\n  href = href.replace(/ /g, '_')\n  let str = this.text() || this.page()\n  return '\\\\href{' + href + '}{' + str + '}'\n}\nmodule.exports = toLatex\n","//\nconst toLatex = function() {\n  let alt = this.alt()\n  let out = '\\\\begin{figure}'\n  out += '\\n\\\\includegraphics[width=\\\\linewidth]{' + this.thumb() + '}'\n  out += '\\n\\\\caption{' + alt + '}'\n  // out += '\\n%\\\\label{fig:myimage1}';\n  out += '\\n\\\\end{figure}'\n  return out\n}\nmodule.exports = toLatex\n","const dontDo = {\n  image: true,\n  caption: true,\n  alt: true,\n  signature: true,\n  'signature alt': true\n}\n\nconst defaults = {\n  images: true\n}\n\n//\nconst infobox = function(options) {\n  options = Object.assign({}, defaults, options)\n  let out = '\\n \\\\vspace*{0.3cm} % Info Box\\n\\n'\n  out += '\\\\begin{tabular}{|@{\\\\qquad}l|p{9.5cm}@{\\\\qquad}|} \\n'\n  out += '  \\\\hline  %horizontal line\\n'\n  //todo: render top image here\n  Object.keys(this.data).forEach(k => {\n    if (dontDo[k] === true) {\n      return\n    }\n    let s = this.data[k]\n    let val = s.latex(options)\n    out += '  % ---------- \\n'\n    out += '      ' + k + ' & \\n'\n    out += '      ' + val + '\\\\\\\\ \\n'\n    out += '  \\\\hline  %horizontal line\\n'\n  })\n  out += '\\\\end{tabular} \\n'\n  out += '\\n\\\\vspace*{0.3cm}\\n\\n'\n  return out\n}\nmodule.exports = infobox\n","//\nconst toLatex = function(options) {\n  let out = '\\\\begin{itemize}\\n'\n  this.lines().forEach(s => {\n    out += '  \\\\item ' + s.text(options) + '\\n'\n  })\n  out += '\\\\end{itemize}\\n'\n  return out\n}\nmodule.exports = toLatex\n","//not so impressive right now\nconst toLatex = function() {\n  let str = this.title()\n  return '⌃ ' + str + '\\n'\n}\nmodule.exports = toLatex\n","//create a formal LATEX table\nconst doTable = function (options) {\n  let rows = this.data\n  let out = '\\n%\\\\vspace*{0.3cm}\\n'\n  out +=\n    '\\n% BEGIN TABLE: only left align columns in LaTeX table with horizontal line separation between columns'\n  out +=\n    \"\\n% Format Align Column: 'l'=left 'r'=right align, 'c'=center, 'p{5cm}'=block with column width 5cm \"\n  out += '\\n\\\\begin{tabular}{|'\n  Object.keys(rows[0]).forEach(() => {\n    out += 'l|'\n  })\n  out += '} \\n'\n  out += '\\n  \\\\hline  %horizontal line\\n'\n  //make header\n  out += '\\n  % BEGIN: Table Header'\n  let vSep = '   '\n  Object.keys(rows[0]).forEach((k) => {\n    out += '\\n    ' + vSep\n\n    if (k.indexOf('col-') === 0) {\n      out += '\\\\textbf{' + k + '}'\n    } else {\n      out += '  '\n    }\n    vSep = ' & '\n  })\n  out += '\\\\\\\\ '\n  out += '\\n  % END: Table Header'\n  out += '\\n  % BEGIN: Table Body'\n  out += '\\n  \\\\hline  % ----- table row -----'\n  ////make rows\n  rows.forEach((o) => {\n    vSep = ' '\n    out += '\\n  % ----- table row -----'\n    Object.keys(o).forEach((k) => {\n      let s = o[k]\n      let val = s.latex(options)\n      out += '\\n    ' + vSep + val + ''\n      vSep = ' & '\n    })\n    out += '  \\\\\\\\ ' // newline in latex table = two backslash \\\\\n    out += '\\n  \\\\hline  %horizontal line'\n  })\n  out += '\\n    % END: Table Body'\n  out += '\\\\end{tabular} \\n'\n  out += '\\n\\\\vspace*{0.3cm}\\n\\n'\n  return out\n}\nmodule.exports = doTable\n","const doc = require('./01-doc')\nconst section = require('./02-section')\nconst paragraph = require('./03-paragraph')\nconst sentence = require('./04-sentence')\nconst link = require('./05-link')\nconst image = require('./image')\nconst infobox = require('./infobox')\nconst list = require('./list')\nconst reference = require('./reference')\nconst table = require('./table')\n\nconst plugin = function(models) {\n  models.Doc.prototype.latex = doc\n  models.Section.prototype.latex = section\n  models.Paragraph.prototype.latex = paragraph\n  models.Sentence.prototype.latex = sentence\n  models.Image.prototype.latex = image\n  models.Link.prototype.latex = link\n  models.Image.prototype.latex = image\n  models.Infobox.prototype.latex = infobox\n  models.List.prototype.latex = list\n  models.Reference.prototype.latex = reference\n  models.Table.prototype.latex = table\n}\nmodule.exports = plugin\n"],"names":["defaults","infoboxes","sections","softRedirect","doc","link","redirectTo","href","page","replace","anchor","text","toLatex","options","Object","assign","out","isRedirect","map","i","latex","join","paragraphs","sentences","s","references","c","headers","images","tables","lists","doSection","num","title","depth","vOpen","vClose","img","t","list","reduce","str","escapeRegExp","smartReplace","all","result","String","reg","RegExp","test","links","formatting","length","forEach","tag","data","fmt","bold","italic","alt","thumb","dontDo","image","caption","signature","infobox","keys","k","val","lines","doTable","rows","vSep","indexOf","o","plugin","models","Doc","prototype","Section","section","Paragraph","paragraph","Sentence","sentence","Image","Link","Infobox","List","Reference","reference","Table","table"],"mappings":"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"}